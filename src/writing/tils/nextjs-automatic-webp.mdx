---
slug: nextjs-automatic-webp
title: Next.js automatically converts PNGs to WebP
createdAt: September 11, 2023
updatedAt: September 11, 2023
format: TIL
status: Evergreen
---

{/* TODO: add a footnote for WebP blurb (`Footnote` component will be good to have). "Google originally developed WebP as a lossy image format to supersede JPEG, one that was able to produce files smaller than a comparable-quality image file encoded as JPEG. Later updates to the format introduced the option of lossless compression, PNG-like alpha channel transparency, and GIF-like animationâ€”all of which can be used alongside JPEG-style lossy compression. WebP is an unbelievably versatile format." */}

The `<Image>` component from Next.js automatically converts PNG images to [WebP](https://web.dev/learn/images/webp/). From the [Image Optimization docs](https://nextjs.org/docs/app/building-your-application/optimizing/images):

> **Size Optimization:** Automatically serve correctly sized images for each device, using modern image formats like WebP and AVIF.

While refreshing this website, I created an SVG footer illustration to replace the PNG image I was using before. Out of curiosity, I checked how large the PNG file is both locally and in DevTools â†’ Network. It's a 34KB `.png` file locally and a ~29KB `.webp` file over the network. Interestingly, the file size is further optimized based on how much of the image is visible in the viewport: ~14KB on mobile up to ~29KB on desktop.

As a side note, the SVG I replaced it with is actually larger ðŸ˜¬, but it removes one network call since the `<svg>` is rendered inline rather than importing an `<img src={'mountains.png'} />`. The SVG is also more flexible (e.g. dynamic fill color based on theme) and crisper on large screens.
